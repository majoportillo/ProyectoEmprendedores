<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Encuentra la Palabra con la Letra</title>
  <style>
    body {
      margin: 0;
      font-family: 'Comic Sans MS', cursive, sans-serif;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100vh;
      overflow: hidden;
      background: linear-gradient(45deg, #9ab8c2, #7bb0b9, #c4c25b, #a6c1ee);
      background-size: 400% 400%;
      animation: gradient 15s ease infinite;
    }

    @keyframes gradient {
      0% {background-position: 0% 50%;}
      50% {background-position: 100% 50%;}
      100% {background-position: 0% 50%;}
    }

    h1 {
      color: white;
      text-shadow: 2px 2px #000;
      margin-bottom: 10px;
    }

    #target-letter {
      font-size: 60px;
      color: #fff;
      margin: 20px;
      text-shadow: 3px 3px #000;
    }

    .letters {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 20px;
    }

    .letter {
      background: white;
      border: 3px solid #ffd700;
      border-radius: 15px;
      padding: 10px 20px;
      font-size: 24px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: transform 0.2s, background 0.2s;
      box-shadow: 2px 2px 10px rgba(0,0,0,0.2);
    }

    .letter:hover {
      transform: scale(1.1);
      background: #ffe066;
    }

    #message {
      font-size: 24px;
      color: white;
      margin-top: 15px;
      height: 30px;
    }

    #score, #timer {
      font-size: 20px;
      color: white;
      margin: 5px;
    }
  </style>
</head>
<body>
  <h1>🔤 ¡Encuentra la palabra con la letra!</h1>
  <div id="score">Puntaje: 0</div>
  <div id="timer">Tiempo: 20s</div>
  <div id="level">Nivel: 1</div>
  <div id="target-letter">A</div>
  <div class="letters" id="letters-container"></div>
  <div id="message"></div>

  <script>
    const letras = "ABCDEFGHIJKLMNOPQRSTUVWXYZ".split('');
    const palabras = ["KIWI", "HOGAR", "AVIÓN", "PERRO", "GATO", "ZORRO", "CASA", "MESA", "LUNA", "SOL", "LIBRO", "JARDÍN", "FLORES", "SILLA", "NIÑO", "NIÑA", "ESCOBA", "BOTELLA", "CAMISA", "TELÉFONO", "ORDENADOR", "PROYECTO"];

    const targetDiv = document.getElementById('target-letter');
    const container = document.getElementById('letters-container');
    const message = document.getElementById('message');
    const scoreDiv = document.getElementById('score');
    const timerDiv = document.getElementById('timer');
    const nivelDiv = document.getElementById("level");
    let nivel = 1;
    let palabrasPorRonda = 6;
    let tiempoInicial = 20;

    let score = 0;
    let timeLeft = 60;
    let letraObjetivo = '';


    function getRandomLetter() {
      return letras[Math.floor(Math.random() * letras.length)];
    }

    function getRandomWords(cantidad) {
      const mezcladas = [...palabras].sort(() => Math.random() - 0.5);
      return mezcladas.slice(0, cantidad);
    }

    function generarJuego() {
      container.innerHTML = '';
      message.textContent = '';

      letraObjetivo = getRandomLetter();
      targetDiv.textContent = `Letra objetivo: ${letraObjetivo}`;

      const palabrasAleatorias = getRandomWords(6);

      // Asegurarse de que al menos una palabra tenga la letra
      if (!palabrasAleatorias.some(p => p.includes(letraObjetivo))) {
        // reemplazar la primera con una que sí tenga la letra
        const palabraConLetra = palabras.find(p => p.includes(letraObjetivo)) || "AVIÓN";
        palabrasAleatorias[0] = palabraConLetra;
      }

      palabrasAleatorias.sort(() => Math.random() - 0.5);

      palabrasAleatorias.forEach(palabra => {
        const div = document.createElement('div');
        div.className = 'letter';
        div.textContent = palabra;
        div.addEventListener('click', () => manejarRespuesta(palabra));
        container.appendChild(div);
      });
    }
let temporizador = iniciarTemporizador();
    function manejarRespuesta(palabraSeleccionada) {
      if (palabraSeleccionada.includes(letraObjetivo)) {
        score++;
        scoreDiv.textContent = `Puntaje: ${score}`;
        message.textContent = '✅ ¡Muy bien!';
        setTimeout(generarJuego, 700);
      } else {
        message.textContent = '❌ Intenta con otra palabra';
      }
      //subir de nivel cada 3 puntos
      if (score % 3 === 0) {
        nivel++;
        palabrasPorRonda++; 
        tiempoInicial = Math.max(30, tiempoInicial - 10);
        nivelDiv.textContent = `Nivel: ${nivel}`;

        clearInterval(temporizador); //reiniciar el tiempo con los nuevo ajustes 
        temporizador = iniciarTemporizador();
      }
      
    }

    function iniciarTemporizador() {
     timeLeft = tiempoInicial;
     timerDiv.textContent = `Tiempo: ${timeLeft}s`;

      const intervalo = setInterval(() => {
        timeLeft--;
        timerDiv.textContent = `Tiempo: ${timeLeft}s`;

        if (timeLeft <= 0) {
          clearInterval(intervalo);
          container.innerHTML = '';
          message.textContent = `⏰ Tiempo terminado. Puntaje final: ${score}`;
        }
      }, 1000);
    }

    generarJuego();
    iniciarTemporizador();
  </script>
</body>
</html>
